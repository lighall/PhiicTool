<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>羊肉串预储值计算器</title>
    <style>
        /* 保持原有样式不变 */
        body { font-family: Arial, sans-serif; max-width: 400px; margin: 50px auto; padding: 20px; background-color: #f5f5f5; }
        .container { background-color: white; padding: 30px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .input-group { display: flex; align-items: center; margin-bottom: 20px; }
        input[type="number"] { width: 100%; padding: 12px; margin: 0 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px; text-align: center; }
        .btn-group { display: flex; align-items: center; }
        .btn-adjust { width: 40px; height: 40px; background-color: #f0f0f0; border: 1px solid #ddd; border-radius: 50%; font-size: 18px; cursor: pointer; display: flex; justify-content: center; align-items: center; }
        .btn-adjust:hover { background-color: #e0e0e0; }
        button.calculate { width: 100%; padding: 12px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; margin-top: 10px; }
        button.calculate:hover { background-color: #45a049; }
        .result { margin-top: 20px; padding: 15px; background-color: #e8f5e9; border-radius: 4px; }
        .formula { color: #666; font-size: 14px; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>羊肉串预储值计算器</h2>
        <div class="input-group">
            <input type="number" id="amount" value="40" step="0.5" min="0">
        </div>
        <button class="calculate" onclick="calculate()">计算优惠</button>
        
        <div class="result" id="output"></div>
    </div>

    <script>
        // 保留两位小数并截断后续数字
        function truncateToTwoDecimals(num) {
            return Math.floor(num * 100) / 100;
        }


        function calculate() {
            const amountInput = document.getElementById('amount');
            const output = document.getElementById('output');
            
            if (amountInput.value === '') {
                alert('请输入有效金额！');
                return;
            }
            
            const originalAmount = parseFloat(amountInput.value);
            if (isNaN(originalAmount) || originalAmount < 0) {
                alert('请输入有效的正数金额！');
                return;
            }

            // 核心计算逻辑
            const discountRate = 1000 / 1118;
            let discountedAmount = originalAmount * discountRate;
            
            // 截断到两位小数（不四舍五入）
            const truncatedAmount = truncateToTwoDecimals(discountedAmount);
            
            // 增加0.01元
            const finalAmount = truncatedAmount + 0.01;
            
            // 显示结果
            output.innerHTML = `
                <div class="formula">
                    计算过程：<br>
                    原始金额：￥${originalAmount.toFixed(2)}<br>
                    优惠公式：金额 / 1118 × 1000 → 截断两位小数 → +0.01元<br>
                    中间值：￥${discountedAmount}<br>
                    截断值：￥${truncatedAmount}<br>
                    最终金额：￥${finalAmount.toFixed(2)}
                </div>
                <div class="result">
                    实际优惠金额：<strong>￥${finalAmount.toFixed(2)}</strong>
                </div>
            `;
        }
    </script>
</body>
</html>
